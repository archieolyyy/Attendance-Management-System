<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Attendance - AMS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="attendance.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <div class="container home-page">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-container">
                <div class="logo">
                    <img src="AMS2.png" class="logo-image">
                </div>
            </div>

            <div class="sidebar-menu">
                <a href="StudentHomePage.html" class="menu-item">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="StudentAttendancePage.html" class="menu-item active">
                    <i class="fas fa-calendar-check"></i>
                    <span>Attendance</span>
                </a>
                <a href="StudentSchedule.html" class="menu-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Schedule</span>
                </a>
                <a href="StudentTeacher.html" class="menu-item">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Teacher</span>
                </a>
            </div>
        </div>

        <!-- Main content area -->
        <div class="main-area">
            <!-- Top navigation -->
            <div class="top-nav">
                <div class="page-title">STUDENT ACCOUNT | Attendance Summary & Calendar</div>
                <div class="search-bar">
                    <input type="text" placeholder="Search...">
                </div>
                <div class="user-profile" id="profileButton">
                    <i class="fas fa-user-circle"></i>
                </div>

                <!-- Profile dropdown -->
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="dropdown-item">Profile</div>
                    <div class="dropdown-item">Settings</div>
                    <div class="dropdown-item">Logout</div>
                </div>
            </div>

            <!-- Content sections -->
            <div class="content-area">

                <!-- Subject List Section -->
                <div class="subject-list-section">
                    <fieldset>
                        <legend>Subject</legend>
                        <ul class="subject-list">
                            <li class="subject-item active" data-subject="mathematics">Mathematics 9</li>
                            <!-- Future subjects can be added here -->
                        </ul>
                    </fieldset>
                </div>

                <!-- Calendar Section -->
                <div class="calendar-section">
                    <div class="content-section attendance-calendar-section">
                        <div class="calendar-header">
                            <h2>Attendance Calendar - Mathematics 9</h2>
                            <div class="calendar-nav">
                                <div class="academic-year">
                                    Academic Year: 2025-2026
                                </div>
                                <div class="month-selector">
                                    <button id="prevMonth" class="month-nav-btn"><i class="fas fa-chevron-left"></i></button>
                                    <span id="currentMonth">March 2025</span>
                                    <button id="nextMonth" class="month-nav-btn"><i class="fas fa-chevron-right"></i></button>
                                </div>
                            </div>
                        </div>

                        <div class="calendar-container">
                            <div class="calendar-grid">
                                <div class="calendar-day-header">Sun</div>
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>

                                <!-- Calendar days will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Attendance statistics section -->
                    <div class="content-section attendance-stats-section">
                        <h2>Attendance Statistics - Mathematics 9</h2>
                        <div class="attendance-stats-content">
                            <div class="stat-item">
                                <div class="stat-label">Present:</div>
                                <div class="stat-value" id="presentCount">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Absent:</div>
                                <div class="stat-value" id="absentCount">0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Excused:</div>
                                <div class="stat-value" id="excusedCount">0</div>
                            </div>
                            <div class="stat-item total">
                                <div class="stat-label">Total Attendance:</div>
                                <div class="stat-value" id="attendancePercentage">0%</div>
                            </div>
                        </div>

                        <div class="attendance-legend">
                            <div class="legend-item">
                                <div class="legend-color present"></div>
                                <div class="legend-label">Present</div>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color absent"></div>
                                <div class="legend-label">Absent</div>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color excused"></div>
                                <div class="legend-label">Excused</div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Add button (same as in home page) -->
        <div class="add-button" id="joinClassButton">
            <i class="fas fa-plus"></i>
        </div>
    </div>

    <!-- Join Class Modal (same as in home page) -->
    <div class="modal" id="joinClassModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Join Class</h2>
            </div>
            <div class="modal-body">
                <div class="class-code-section">
                    <div class="class-code-header">
                        <h3>Class code</h3>
                        <p>Ask your teacher for the class code, then enter it here.</p>
                    </div>
                    <input type="text" placeholder="Class code" class="class-code-input">
                </div>
                <div class="instructions">
                    <p>To sign in with a class code</p>
                    <ul>
                        <li>Use an authorized account</li>
                        <li>Use a class code with 5-7 letters or numbers, and no spaces or symbols</li>
                    </ul>
                </div>
                <div class="modal-actions">
                    <button class="cancel-button">Cancel</button>
                    <button class="join-button">Join</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Profile dropdown toggle
            const profileButton = document.getElementById('profileButton');
            const profileDropdown = document.getElementById('profileDropdown');

            profileButton.addEventListener('click', function() {
                profileDropdown.classList.toggle('show');
            });

            // Close the dropdown when clicking outside
            window.addEventListener('click', function(event) {
                if (!event.target.matches('.user-profile') && !event.target.matches('.fa-user-circle')) {
                    if (profileDropdown.classList.contains('show')) {
                        profileDropdown.classList.remove('show');
                    }
                }
            });

            // Join Class modal functionality
            const joinClassButton = document.getElementById('joinClassButton');
            const joinClassModal = document.getElementById('joinClassModal');
            const cancelButton = document.querySelector('.cancel-button');

            joinClassButton.addEventListener('click', function() {
                joinClassModal.classList.add('show');
            });

            cancelButton.addEventListener('click', function() {
                joinClassModal.classList.remove('show');
            });

            // Close modal when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === joinClassModal) {
                    joinClassModal.classList.remove('show');
                }
            });

            // Calendar navigation
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            const currentMonthDisplay = document.getElementById('currentMonth');
            const calendarGrid = document.querySelector('.calendar-grid');

            // Month names array
            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];

            // Initialize with March 2025 (start of academic year 2025-2026)
            let currentMonth = 2; // March (0-indexed)
            let currentYear = 2025;

            // Function to update calendar display
            function updateCalendar() {
                // Update month/year display
                currentMonthDisplay.textContent = `${monthNames[currentMonth]} ${currentYear}`;

                // Clear the calendar
                calendarGrid.innerHTML = `
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>
                `;

                // Get the first day of the month and the number of days in the month
                const firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay();
                const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

                // Add empty cells for the days before the first day of the month
                for (let i = 0; i < firstDayOfMonth; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.classList.add('calendar-day', 'empty');
                    calendarGrid.appendChild(emptyDay);
                }

                // Add the days of the month
                for (let i = 1; i <= daysInMonth; i++) {
                    const day = document.createElement('div');
                    day.classList.add('calendar-day');
                    day.textContent = i;

                    // Add any attendance data here (e.g., "present", "absent", "excused")
                    // For this example, let's randomly assign attendance status
                    const attendanceStatus = ['present', 'absent', 'excused'][Math.floor(Math.random() * 3)];
                    if (i <= 20){
                      day.classList.add('present');
                    }
                    else{
                      day.classList.add(attendanceStatus);
                    }

                    calendarGrid.appendChild(day);
                }
            }

            // Initial calendar setup
            updateCalendar();

            // Month navigation buttons
            prevMonthBtn.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                updateCalendar();
            });

            nextMonthBtn.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                updateCalendar();
            });

            // Add some sample attendance data (just for display purposes)
            document.getElementById('presentCount').textContent = '21';
            document.getElementById('absentCount').textContent = '2';
            document.getElementById('excusedCount').textContent = '1';
            document.getElementById('attendancePercentage').textContent = '91%';

            // Subject selection
            const subjectItems = document.querySelectorAll('.subject-item');
            subjectItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove 'active' class from all subject items
                    subjectItems.forEach(si => si.classList.remove('active'));

                    // Add 'active' class to the clicked subject item
                    this.classList.add('active');

                    // Update calendar and statistics based on the selected subject
                    const selectedSubject = this.dataset.subject;
                    updateCalendar(); // You might need to modify this to load data for specific subjects

                    // Example: Update the title
                    document.querySelector('.calendar-header h2').textContent = `Attendance Calendar - ${this.textContent}`;
                    document.querySelector('.attendance-stats-section h2').textContent = `Attendance Statistics - ${this.textContent}`;
                });
            });
        });
    </script>
</body>
</html>